# TODO - Top AI Ideas

## Check-list de mise en place

**‚úÖ Termin√© :**
- [x] Structure repo `/ui`, `/api`, Makefile, Dockerfiles, docker-compose
- [x] Sch√©ma SQL + migrations (Drizzle) appliqu√©s
- [x] API TypeScript (Hono) avec sch√©mas Zod, OpenAPI g√©n√©r√©
- [x] Service OpenAI (Node) et endpoint `/use-cases/generate`
- [x] Calculs serveur et endpoints d'agr√©gation Dashboard
- [x] UI SvelteKit pages et stores, i18n FR/EN
- [x] Syst√®me de queue PostgreSQL avec QueueManager
- [x] Compl√©ter les tests unitaires (121 tests API)
- [x] Compl√©ter les tests E2E (91/101 tests Playwright)
- [x] CI GitHub Actions (build/test/deploy)
- [x] Migration SQLite ‚Üí PostgreSQL 17
- [x] D√©ploiements: UI (GitHub Pages), API (Scaleway Container)
- [x] Fix UI deployment (api url harcoding > VITE_API_BASE_URL)
- [x] Fix CORS - enable front from *.sent-tech.ca and localhost
- [x] Fix 404 enterprises/[id] path in production
- [x] Auth Webauth with mail chck + minimal RBAC
- [x] Usecase UI: card with headers/footer, model tag, citations
- [x] Am√©liorer Dashboard en tant que synth√®se ex√©cutive
  - [x] ajouter une zone de ROI (top left quadrant, vert, to be discussed)
  - [x] le graphique devrait remplir max 50% de l'√©cran, et devrait √™tre plus haut
  - [x] le label du cas doit √™tre inscrit sans hover, et au hover la description doit √™tre affich√©e, valeur complexit√© et non le statut
  - [x] ajouter un prompt pour synth√®se ex√©cutive de l'ensemble des cas : introduction incluant description du dossier et enjeux de l'entreprise, une analyse g√©n√©rale pr√©sentant une mise en exergue les tops cas - format √† challenger / discuter
  - [x] G√©n√©ration d'un rapport reprenant synth√®se ex√©cutive et dashboard et l'ensemble des cas (une page par cas ?)
- [x] S√©parer dans la g√©n√©ration la description en: description (plus courte), probl√®me, solution
- [x] Fixer les cibles make pour linting et de typecheck puis les appliqur progressivement, cible par cible en faisant un plan
- [x] Chatbot Lot A ‚Äî Mise √† jour cibl√©e d'un objet ‚úÖ Fonctionnellement fini (cf. spec/SPEC_CHATBOT.md)
  - [x] API : POST `/api/v1/chat/messages` + SSE global
  - [x] Tools : `read_usecase`, `update_usecase_field`, `web_search`, `web_extract`
  - [x] UI : `ChatWidget`, `ChatPanel`, `StreamMessage`
  - [x] D√©tection automatique du contexte depuis la route
  - [x] Tests unitaires et d'int√©gration
  - [x] Tests E2E Playwright
  - [x] Extension aux autres objets (folder, company, executive_summary)
  - [x] Tool calls parall√®les fonctionnels (boucle it√©rative dans `runAssistantGeneration`)
  - [x] Affichage des tool calls dans `StreamMessage` (accord√©on par tool_call_id)
  - [x] G√©n√©rations classiques stream√©es via `chat_stream_events` (message_id null)
  - [x] Snapshots `snapshot_before` et `snapshot_after` dans `chat_contexts` (infrastructure pr√™te)
  - [x] Resync SSE fonctionnel (via `historySource` et endpoints batch)
- [x] Ajouter une fonction de validation des droits utilisateurs, avec un des profils. Ce profil doit permettre d'avoir acc√®s √† toutes les fonctions sans limite d'usage. Mais il n'a acc√®s qu'√† ses propres artefacts
- [x] Licence
- [x] Chatbot lot B1
  - [x] am√©liorer la responsiveness du widget flottant (bulle unique Chat/Queue + panneau)
    - [x] g√©rer mobile (panneau plein √©cran / bottom-sheet)
    - [x] g√©rer desktop (tailles max + scroll internes stables, pas de d√©bordement, possibilit√© de basculer en panel)
    - [x] accessibilit√© (focus trap, ESC, aria, navigation clavier)
  - [x] chat / g√©rer le streaming "markdown" cf spec/MARKDOWN_STREAMING.md
- [x] Utiliser une lib d'icones digne de ce nom (@lucide/svelte)
- [x] Ajouter GPT 5.2
- [x] UI Fix streaming (change postgres prod + update stream for local mode)
- [x] Am√©liorer la vue cas d'usage
  - [x] Afficher le nom du dossier (branche: `feat/usecase-show-folder-organization`)
  - [x] Afficher l'entreprise (branche: `feat/usecase-show-folder-organization`)
  - [x] UI Fix post stream 'blink' (when message finished in chat) (branche: `feat/usecase-show-folder-organization`)
- [x] **Chatbot Lot B ‚Äî Contexte documentaire (ingestion + r√©sum√© + consultation)** (cf. spec/SPEC_CHATBOT.md - source de v√©rit√©)
  - [x] API : POST `/api/documents` (upload) ; GET `/api/documents` (liste) ; GET `/api/documents/:id` (meta+r√©sum√©) ; GET `/api/documents/:id/content` (download)
  - [x] Job queue "document_summary" d√©clench√© √† l'upload ; statut dans `context_documents` ; events `document_added` / `document_summarized`
  - [x] Tables `context_documents` (+ option `context_document_versions`) ; stockage S3/MinIO
  - [x] UI : Bloc "Documents" dans les pages objets (dossiers, cas d'usage, organization) : upload, liste, statut, r√©sum√©
  - **Couverture CU** : CU-022
- [x] Fix: le refresh dans github pages (CTRL+R) des pages cas-usage|entreprise/[id] g√©n√®re un 404 (c'est une r√©gression)
- [x] Fix: Dans matrix, le nombre de cas n'est pas d√©compt√© (nombre par seuil de valeur pour configuration des seuils de valeur et complexit√©).
- [x] Feat: Dans matrice, il faut pouvoir ajouter et supprimer des axes de valeur complexit√©
- [x] Feat: dans EditableInput, pour les input markdown, mettre en exergue les champs √©dit√©s avec un point orange (comme les inputs normaux) + hover avec bord gauche en gris
- [x] Feat: dans les fiches entreprise (vue /entreprises), tronquet taille au meme nombre de caract√®res que produits et services (...)
- [x] Fix: NavigationGuard: sauver automatiquement, tout simplement !
- [x] Fix webauthn : in prod web auth is both ok for register and login, but in localhost for dev, webauthn is ok for register but not for login with a smartphone (√† retravailler)
- [x] Chatbot lot B2
  - [x] Feedback utilisateur (üëç/üëé) sur les suggestions
  - [x] icones sous le chat utilisateurs (visibles au hover sur la bulle de chat ou les icones)
    - [x] Modification d'un message utilisateur
      - [x] Propose l'annulation des modifications effectu√©es dans le chat (objets √©dit√©s le cas √©ch√©ant depuis le point du chat) ou de les garder (rollback)
    - [x] Retry d'un message utilisateur (supprime la suite d√©j√† effectu√©e) (idem propose annulation ou pas)
    - [x] Copie d'un message utilisateur
  - [x] icones soue le chat de r√©ponse
    - [x]¬†Copie d'une r√©ponse (visibles au hover sur la bulle de chat ou les icones)
  - [x] Am√©lioration de la bulle d'input utlisateur
    - [x] Mode monoligne
      - [x] Le texte (input est centr√© verticalement)
      - [x] Ajouter un + √† gauche pour un pop up de menu
        - [x] Ajout d'upload de document dans la session de chat (trombone)
          - [x] R√©sum√© automatique (court, long le cas √©ch√©ant) pour attacher √† la session
          - [x] Quand un doc est attach√© √† la session, le doc tool va pouvoir consultr le ou les docs de la session
        - [x] Liste (checkable) des tools et contextes de la session
          - [x] Ajout d'un mode multi contexte (lorsqu'on change de vue: les objets s'ajoutent) (les dernier objet est prioritaire dans l'activation des outils)
          - [x] Les contextes et tools sont list√©s et activables / d√©sactivables dans le menu
    - [x] Mode multiligne
      - [x] Lorsqu'il y a plus d'une ligne, la hauteur de l'input s'√©tend automatiquement t maximum jusqu'√† 30% de la hauteur de la box
      - [x] L'input est bascul√© sur Tiptap markdown (pas editableInput) pour permettre les copiers coller rich text
- [x] Collaboration part 1
  - [x] Share workspace
    - [x] User can create additionnal workspaces (in param) and is granted admin of it
    - [x] User can delete any of the workspace which he admins
    - [x]¬†User can provide access to any other user to any of the workspace with admin rights : he provides readonly or editor or admin access
  - [x] Object editions
    - [x] When an editor (or admin) is first on a view/object, he puts a locker on dit and can only edit
    - [x] When an other editor is on it, the view is locker
    - [x] Other viewer or locked editor is on the view, he recieves updates through sse
    - [x] When a view is locked to an edit user, the UI ask to unlock It async. He recieves the answer through sse.
    - [x] When the API recieves an unlock demand, it refuses directly if another demand is already processing. Else it sends through sse to the current editor with the locker a demand.
    - [x] No timeout, no explicit refuse; request cleared when locker leaves; accept transfers lock to the requester.
- [x] Entreprise >> Organisation
  - [x] Renommer entreprise(s) / company.ies en organisation / organizations en profondeur (mod√®le de donn√©e, api, √©crans).
  - [x] En profiter pour migrer vers data les donn√©es de l'entreprise
  - [x] Ajouter les r√©f√©rences √† la g√©n√©ration
  - [x] Ajoutr une section d'indicateurs de performance (sectoriel et sp√©cifiques √† l'entreprise)
- [x] Collaboration part 2
    - [x] Fonction d'import / export de workspace (zip json + doc le cas √©ch√©ant, extension zip)
    - [x] Fonction d'import / export de dossier (zip jsons + docs le cas √©ch√©ant, extension zip)
    - [x] Fonction d'import / export de usecase(s) et organisation(s) (zip json + docs le cas √©ch√©ant, extension zip)
  - [x] Comments
    - [x] Each object and data part of object can have on or many comments
    - [x] There is a table of comments
    - [x] A comment can have many consecutive answers (themselves are in the comments table), but there is only one level of answer (no sub answers)
    - [x] A comment can be attributed to a user using @ (auto complete with users of the workspace).
    - [x] If no attribution, the user is the initial comment creator
    - [x] Each comment can be "closed" by the last attributed user
    - [x] Comments are visible on the header on the card of the data part
    - [x] Options d'export : avec ou sans commentaire
- [x] Permettre l'interruption du chatbot (produire une r√©ponse imm√©diatement, ou stop)
- [x]¬†bug: hors mode docker, il n'y a plus de barre de d√©filement alors que le contenu d√©passe l'√©cran
- [x] Reduce CI time
  - [x] Enable mutliple workers in test-api
  - [x] Split test-e2e in two // execution groups
- [x]¬†remplacer le mod√®le de print par un mod√®le de template (.docx patch√© via dolanmiu/docx)
  - [x] Lot 1 (courant): DOCX
    - [x] define a model for usecase fitting in one page
    - [x] define multiplage model for executive synthesis + compilation of uses cases as annex
- [x] basculer en i18n bilingue anglais / fran√ßais
  - [x] R√©sum√© fait (d√©j√† en place) : inventaire exhaustif des cha√Ænes UI, remplacement par i18n, dictionnaires FR/EN √©tendus, switch de langue valid√© sur vues cl√©s (see Wave 2 Lot 2.1).
  - [x] identifier et traduire tous les messages
techniques restent anglophones (e.g migrer cas-usage vers usecase)
  - [x] Normalize executive summary technical keys to English (`analysis`, `recommendation`, `executive_summary`) with backward-compatible aliases for legacy keys (`analyse`, `recommandation`, `synthese_executive`).
  - [x] G√©n√©rations: ajouter une g√©n√©ration pour adapter la matrice en fonction de l'entreprise, lors de la g√©n√©ration d'un dossier. Une matrice sera instanci√©e pour l'entreprise. Lorsque la g√©n√©ration a lieu, la matrice est stock√©e en template par d√©faut pour l'entreprise. Si un nouveau dossier est g√©n√©r√© pour l'entreprise, par d√©faut il reprendra cette matrice sans nouvelle g√©n√©ration. Une option √† la g√©n√©ration du dossier sera propos√©e pour g√©n√©rer une matrice sp√©cifique au dossier (ex quand on regarde un processus sp√©cifique comme le marketing pour l'entreprise). Les matrices seront alors attach√©es √† l'organisation et s√©lectionnables lors de la g√©n√©ration du dossier.
- [x] Streamline des directives mdc
  - [x] analyse des meilleurs pratique (conductor model, model testing Bmad)
- [x] Chrome extension lot 6B (tools locaux unifi√©s `tab_read`/`tab_action`, permissions runtime par origine, settings endpoint/permissions, parit√© sidepanel/widget)
  - [x] inclusion make lint typecheck avant passage de main √† l'utilisateur
  - [x] cr√©ation d'un template de branche, incluant les UAT partiels √† chaque lot
  - [x] tout-make: clarifier les obligation d'usage de make
  - [x] sp√©cifie make commit dans l workflo pour √©viter le coauthoring cursor
  - [x] adapter les directive d'architecture design pattern: capitaliser les design patterns dans les spec (directives), et s'assurer de la documentation et de la gestion du cycle de vie de gestion des composants cl√©s (API et UI), avec gestion de la dette technique interne (plan de refacto)
  - [x] Cr√©er un mdc pour le design system
- [x] Specs mdc: consolidate multi-branch isolation mode (root `dev` preserved for user UAT, branch dev in `tmp/feat-<slug>`, tests on dedicated ENV, `ENV` always last in make commands)
- [x] Minor UI & tooling evols branch (`feat/minor-evols-ui`) delivered and fully validated (Lots 1‚Üí4 + Lot N green on CI run `22198601064`).
- [x] Concevoir le plugin chrome (socle livr√© jusqu'au lot 6B)
  - [x] SDLC
    - [ ] si possible avoir un plugin "capsule", charger la lib depuis le site de r√©f√©rence
    - [x] isoler correctement le chatwidget et ses stores pour permettre ce mode
    - [x] fiabiliser la connectivit√© API du widget flottant (init session + send/stream, sans `Failed to fetch`) via la conf d'extension / proxy (Lot 4A)
  - [x] UI
    - [x] mode bulle + flottant
    - [x] mode docker/side panel
    - [x] toasters √©galement
  - [x] Gestion des tools locaux chrome via ws ete store dedi√© (sevice worker)
- [x] Design system
  - [x] Normaliser les couleurs primary des boutons

**‚è≥ √Ä faire :**
- [ ] Rebase integration post-merge `feat/chrome-plugin` -> `feat/minor-evols-ui`
  - [ ] Resolve the 8 conflicted files by preserving extension runtime parity from `main` and replaying minor evols deltas.
  - [ ] Re-run API/UI/E2E gates and full UAT (web app + extension non-regression).
- [ ] S√©curit√© tooling API ‚Äî exception temporaire minimatch (CVE-2026-26996)
  - [ ] Exception enregistr√©e dans `.security/vulnerability-register.yaml` (composant npm embarqu√© image API, chemin build/tooling)
  - [ ] Planifier l'upgrade npm/base image vers une version embarquant minimatch corrig√© (sans patch manuel fragile)
  - [ ] Retirer l'exception apr√®s validation `make test-api-security-container`
- [ ] Isoler les jobs IA sur un worker d√©di√© (comme DOCX)
  - [ ] Extraire l‚Äôex√©cution des jobs IA (`usecase_list`, `usecase_detail`, `executive_summary`, `chat_message`) hors thread API principal
  - [ ] Garder la s√©paration des classes de queue (`publishing` vs `ai`) et valider la non-r√©gression SSE/annulation
- [ ] Templating ‚Äî Lot 2 (post-cl√¥ture du lot DOCX multipage)
  - [ ] TOC/page numbers policy (limitation actuelle):
    - [ ] Keep current behavior as fail-safe: TOC refresh is user-driven (`manual update required`), not guaranteed server-side.
    - [ ] Document mandatory user action in template guide (`api/templates/README.md`): Word `Ctrl+A` + `F9` / LibreOffice update index.
  - [ ] TOC automation options (future):
    - [ ] Layout engine sidecar to compute final pagination (true server-side TOC refresh).
    - [ ] Candidate A: LibreOffice UNO worker/sidecar (heavy ops/runtime dependency).
    - [ ] Candidate B: ONLYOFFICE Document Builder post-processing.
    - [ ] Candidate C: Aspose.Words service (`.NET`/`Java` microservice).
    - [ ] Fallback alternatives if no engine: static TOC without page numbers, or DOCX+PDF dual export.
  - [ ] PowerPoint templating
    - [ ] Define `pptx` template contract aligned with folder/usecase objects.
    - [ ] Add generation path for presentation exports (design + API runtime).
  - [ ] Google Workspace suite
    - [ ] Define authoring workflow with Google Docs/Slides and export normalization constraints.
    - [ ] Define managed template lifecycle and sync strategy (Drive objects, versions, fallbacks).
- [ ] **Lot 2.3 Bilingual modeling (storage + projection)**
  - [ ] multilingual storage model scope (use case, organization, folder, prompts).
  - [ ] Implement API/UI typing + validation + normalization with backward compatibility.
  - [ ] multilingual prompt model and fallback contract.
  - [ ] Implement storage/editor/runtime prompt selection by locale.
- [ ] am√©lioration gestion id√©ation cas d'usage
  - [ ] ajouter les contraintes (constraints) au cas d'usage
    - [ ] modif mod√®le de donn√©e appli (devrait pas g√©n√©rer de migrate)
    - [ ] modif de la pr√©sentation et du print (mettre benefices / contraintes / mesure succ√®s / risques)
- [ ] Workflow / Authoring
  - [ ] G√©rer le statut de validation de chaque objet
  - [ ] G√©rer les mod√®les d'autorisation / partie d'objet
  - [ ] UI Badges de validation
  - [ ] UI Outil de r√©vision
  - [ ] UI Outil de mod√©lisation de worflow
- [ ] Ajouter un tool de planning
  - [ ] api endpoints et structure 100% align√©e avec les autres tools
  - [ ] IA G√®re un plan d√©taill√© avec des √©tapes de haut niveau incluant l'appel aux autres tools
  - [ ] IA G√®re le cadrage du plan (options/question multichoix) et ses contraintes
  - [ ] IA G√®re l'√©cart au plan (d√©couvertes pendant ex√©cution sortant du cadre de contraintes ou sp√©cification) avec une strat√©gie d'√©vitement (pr√©f√®re poser les question en lot en √©vitant les interruptions et limitant les questions √† l'utilisateur)
  - [ ] G√®re les interruption utilisateur sans perdre le fil du plan
  - [ ] G√®re les √©carts li√©es au interruption utilisateur pour les modification du plan (nouvelle s√©ance de cadrage et replanificatoin le cas √©ch√©ant, explicitant les √©carts au plan)
  - [ ] IA G√®re l'√©valuation du niveau de r√©flexion pour les sous t√¢ches (√©conomie de tokens) selon param√©trage utilisateur
  - [ ] UI Pr√©sente les questions r√©ponses (cadrage)
  - [ ] UI Pr√©sente les √©tapes d'avancement au fur et a mesure
- [ ] Visual templates / doc exports (Design session)
  - [ ] Offre une ui pour designer l'agencement d'un objet dans sa pr√©sentation UI
  - [ ] Gere les objets incluant des listes
  - [ ] Ajoute la gestion d'images illustratives
  - [ ] Ajoute la gestion de graphiques illustratives (chartjs comme la matrice priorisation)
  - [ ] Add server-side simulated-annealing layout support for dashboard charts
    - [ ] Define a pure solver contract (`points/labels/dimensions/thresholds` -> `boxes/connectors/collisionScore`)
    - [ ] Run layout computation in a worker with a publishing-compatible API contract
    - [ ] Integrate this computation in the DOCX/dashboard image publishing flow with UI fallback on error/timeout
    - [ ] Measure impact (UI render time, job duration, stability) and decide interactive dashboard rollout
  - [ ] Gestion d'objet d√©riv√© (pptx d'un docx): agents de pr√©sentation
  - [ ] Gere le mode print (design compl√©mentaire cf synth√®se exec qui est une vue particuli√®re de l'objet folder)
  - [ ] Document manag√© (avec des tags dans le xml pour permettre le reprage)
    - [ ] G√®re le design d'un docx templat√©
    - [ ] G√®re le design d'un powerpoint templat√©
    - [ ] G√®re le design d'un excel templat√©
    - [ ] G√®re l'√©dition synchronis√©e (sauvegarde db > sync gdrive + supervision de modif du doc gdrive > sync db)
    - [ ] Gestion des conflits (√©dition sur le gdrive du doc en confit sur une section)
  - [ ] Gestion de biblioth√®que de style
    - [ ] Template de slides
- [ ] Storybook (spec)
  - [ ] analyser les test existant UI, API et e2e et faire un gap analysis aux meilleures pratiques
  - [ ] √©valuer l'opportunit√© d'utiliser storybook pour le testing de composant UI et assurer l'acc√©l√©l√©ration du testing
  - [ ] proposer un plan d'impl√©mentation en une branche
- [ ] Modularisation de l'UI permettre de supporter diff√©rents d√©ploiements du module chatwidegt - design phase
  - [¬†] Plugin VS code (+tools "locaux")
  - [ ] Plugin chrome (+ tools "locaux")
  - [ ] App standalone desktop (+ tools "locaux")
- [¬†] Tools de productivit√©
  - [¬†] Todo/Plan
    - [¬†] Todo basic
    - [ ] R√©visable
    - [ ] Mutli √©tapes
    - [ ] Synchro avec outils
      - [¬†] Fichier md (coding)
      - [ ] Issues/Roadmap Github (approfondir)
      - [¬†] Todo bureautique (approfondir : Google, Microsoft, Notion)
    - [¬†] tool (mono agent)
    - [ ] agentic (conductor)
    - [¬†] personnel
    - [ ] collaboratif
- [ ] AI optim
  - [ ] Global session (offrir √† tous)
    - [ ] BYOK
      -¬†[¬†] openAI
      - [¬†]¬†Gemini
      - [ ]¬†Claude
      - [ ] Mistral
    - [ ] SSO
      -¬†[¬†] openAI
      - [¬†]¬†Gemini
      - [ ]¬†Claude
      - [ ] Mistral
  - [¬†] Par utilisateur
    - [ ] BYOK
      -¬†[¬†] openAI
      - [¬†]¬†Gemini
      - [ ]¬†Claude
      - [ ] Mistral
    - [ ] SSO
      -¬†[¬†] openAI
      - [¬†]¬†Gemini
      - [ ]¬†Claude
      - [ ] Mistral

    - [x] Lecture d'un tab
    - [x] Automation d'un tab (cliquer ...)
- [ ] Plugin Chrome (suite)
  - [ ] Collaboration local / remote
    - [ ] Collaboration local / remote (outils d'un workspace)
  - Tools sp√©cialis√©s
    - [ ] Interaction avec applications via UI
      - [ ] Google workspace
        - [ ] Gmail
        - [ ] Google sheet
        - [ ] Google doc
        - [ ] Google slide
        - [ ] Google chat
        - [¬†] Gemini
      - [ ] Microsoft
        -¬†[ ] Outlook
        - [ ] Teams
        - [ ] Sharepoint / Excel
        - [ ] Sharepoint / Word
        - [ ] Sharepoint / Powerpoint
        - [ ] Copilot
      - [ ] Github
        - [ ] Issues
        - [ ] PR
      - [ ] Messageries (en plus de Google Chat et Teams)
        - [ ] Unification des messageries c√¥t√© UI
        - [ ] Whatsapp
        - [ ] Telegram
        - [ ] Signal
        - [ ] Dischord
        - [ ] Slack
    - [ ] Pilotage API pour acc√©l√©ration
      - [¬†] Capacit√© local / d√©l√©gation remote (via Auth appli)
      - [ ] Google workspace
        - [ ] Gmail
        - [ ] Google sheet
        - [ ] Google doc
        - [ ] Google slide
        - [ ] Google chat
        - [¬†] Gemini
      - [ ] Microsoft
        -¬†[ ] Outlook
        - [ ] Teams
        - [ ] Sharepoint / Excel
        - [ ] Sharepoint / Word
        - [ ] Sharepoint / Powerpoint
      - [ ] Messageries
        - [ ] Whatsapp
        - [ ] Telegram
        - [ ] Signal
        - [ ] Dischord
        - [ ] Slack
      - [ ] Github
        - [ ] Issues
        - [ ] PR
- [ ] Cr√©er une capacit√© d'agentique en worker (cluster kube) (approfondir)
- [ ] Agent de code (vs code + remote) (approfondir)
  - [ ] Vs code
    - [¬†] Modeles
    - [ ] BYOK
      -¬†[¬†] openAI
      - [¬†]¬†Gemini
      - [ ]¬†Claude
      - [ ] Mistral
    - [ ] SSO
      -¬†[¬†] openAI
      - [¬†]¬†Gemini
      - [ ]¬†Claude
      - [ ] Mistral
    - [ ] Re-edit = Checkpoint base code (git)
    - [ ] Manage context summary
    - [ ] Tools
      - [ ] apply-patch
      - [¬†] grep
      - [ ] look up chat history (limit red fish effet)
      - [ ] Shell
        - [¬†]¬†facilit√© de choix (git commit mais pas git push etc)
        - [ ] background exec
      - [ ] Remote exec (kube)
      - [ ] Plan (r√©visable)
      - [ ] Conductor model (subagentique)
  - [ ] Autonomous agent
    - [ ] Use plan and conductor model
    - [ ] Manage feedback with human
      - [¬†] Summary with key decision points (code base architecture change)
      - [ ] Key code base change proposal
    - Agents:
      - [ ] Autonomy (remove lib dependency)
      - [ ] Backport to third langage (api: rust, ui: react, vue)
      -¬†[¬†] Code security
      - [ ] Code lib upgrade
      - [ ] Design
      - [ ] Spec & doc consolidation
      - [ ] PO / Product & Marketing
      - [ ] QA / testing (with vision)
- [ ] Checkpoints (rassembler ici la gesiton de checkpoint: retour arri√®re sur un chat = lister et ajouter une version des objets / sous objets modifi√©s / gestion conflit multi utilisateur). Checkpoint humain vs utilisateur : ne pas verisonner apr√®s un ajout "imm√©diat" mais apr√®s un mode √† d√©finir de latence raisonnable (eg 5 seconde apr√®s sortie du champ etc).
- [¬†] Interrompre vs steering (√† mettre qq part)
- [ ] spec mdc: cherry-pick/evaluate external spec kits (MS/GitHub) ‚Äî deferred for now
- [ ] CI evols
  - [ ] Separer build-api des test unitaires et int√©gration pour permettre test-e2e de commencer plus t√¥t, et mettre le publish api en d√©pendance des tests unitaires et int√©gration
  - [¬†] Envisager le matrix pour les text unitaires et int√©gration
- [ ] Minor evols
  - [¬†] Toaster: passer en bas (adjoint √† l'icone de chat)
  - [ ] EditableInput: passer d'une attente de 5 seconde √† un retour imm√©diat
  - [ ] Editable input dans les view:
    - [ ] Matrice: passer √† un mode input texte / md pour les axes
    - [ ] Secteur = trop petit
    - [ ] Inspecter les autres pb de tail similaire √† secteur
  - [ ] Agents de g√©n√©ration : cr√©er un commentaire par d√©faut
  - [¬†] Tool de modification : mettre un commentaire sur les champs modifi√©s
- [ ] Agent assistant UI: pour un "template" (workflow/objets/agents), g√©rer un agent favorisant
  - [¬†] l'autodiscovery d'un utilisateur sur ce template (design phase)
    - [ ] aide complete initiale : parcourir les √©crans, donner des tips
    - [ ]¬†aide locale : en mode "discovery", l'agent intervient lorsqu'une vue n'a pas encore √©t√© activ√©e
    - [ ] aide √©tendue : l'agent supervise les actions de l'utilisateur, et d√©tecte des aml√©riorations possible dans sont interaction avec l'UI et les agents
  - [¬†] l'auto documentation
    - [¬†] g√©n√©ration de doc from scratch
    - [¬†] g√©n√©ration d'incr√©ment de doc
    - [¬†] screeshots
    - [¬†] automatisation ci
  - l'auto test
    - [ ] pendant la phase de d√©v, √† partir des tests UAT propos√© dans le contexte d'un branche.md, faire les screenshots et documenter
    - [ ] √™tre activable via une target make pour livrer constats et screenshot (pour utilisation par cursor)
  - [ ] principes
    - [ ] doit reposer sur des m√©canismes de tag de div pour permettre une interaction entre l'agent et des actions UI de mise en exergue
    - [ ] doit permettre d'avoir une conscience des codes sources, a minimal de l'UI, pour aider au d√©bug ou √† une compr√©hension avanc√©e selon le public (d√©v, support, end-user)
    - [ ] doit √™tre concu pour une maintenance r√©currence simple
    - [ ] d√©sactivable
  - [ ] Livrables
    - [ ] une spec md
    - [ ] un modele de donn√©es
    - [ ] un mod√®le d'op√©ration (ci etc quand je livre les artefacts et les commit, ce peut √™tre un make update-doc etc)
    - [ ] un plan d'impl√©mentation (potntiellement multibranche/mulit-sous-lots, chaque branche visant une mise en production)
  - [ ] Cr√©er une cible / environnemnt sp√©cifique (peut √™tre bas√© sur le mode dev, mais avec playwright activ√©, pas en mode test e2e mais sur la m√™me flavor)
  - [ ] Un agent passif g√®re les d√©roul√©s dans l'√©cran
- [ ] Renforcement de la structure agentique (phase design)
  Etudier les finalit√©s/opportunit√©s suivantes afin de d√©finir le meilleur modele cible
  - [ ] Finalit√©s √† supporter (on ne fait que la partie agentique ici)
    - [¬†]¬†La finalit√© sera de pouvoir faire une application auto-codante. La structure de l'agentique est un √©l√©ment coeur du redesign, il faut penser aux diff√©rent contextes et aux interactions d'outils de l'agentique pour lui fournir la meilleur gestion, y compris en gestion de version de lui m√™me
    - [ ] use case plugin vs code (g√®re les cas d'agent sous agents)
    - [ ] use case plugin gmail/googleworkspace (remplacer gemini dans ces contextes)
    - [ ] use case d'autodoc et assistant de l'app (expert utilisation et test e2e de l'appli) cf paragraph associ√©
    - [ ] use case assistant chrome capable de g√©rer les situations
  - [ ] Opportunit√© du RL / modele adaptatif (agentique autonome / apprenant)
  - [ ] Favoriser le templating d'agent (gestion de librairies d'agents, export/import, versionnement)
  - [ ] Pivoter vers langchain (multi model provider, easier agentic / tools orchestration) ou un autre mod√®le
  - [ ] Permettre √† l'utilisateur de configurer le mod√®le de l'agent en cours d'utilisation (soit change de llm ou de puissance de r√©flexion)
  - [ ] Ajouter un mode plan avec todo
  - [ ] Versionner les prompts et agents du chat et les rendre accessible √† configuration dans l'UI, avec une gestion intelligente de objets, tools et du workflow configurable via l'UI
  A livrer:
  - [ ] Sp√©cification de la nouvelle structure agentique cible
  - [ ] Composant API et UI cible
  - [ ] Mod√®le de donn√©es cible
  - [ ] Etude d'impact incluant la continuit√© dans la gestion du streaming, les prompts d'√©valuation de raisonnement, et l'exhaustivit√© des agents existant
  - [ ] Plan de transition √©ventuellement allotti en plusieurs branche et sous lots, chaque branche devant aboutir √† une MEP
- [ ] Citations objets et liens iconifi√©s dans le chat
- [ ] Remplacer Tavily par DataForSeo + Jina
- API & UI Refacto
  - [ ] Handle all objects (use case, folders and orgs) as type object in one table, relations being and applicative driven relation (still relying on self join) and having easier modeling of generic configuration of prompts related to objects
  - [ ] Mutualize heavily context-generations based on lanchain workflows making wor
- [ ] Introduire la notion de workflow (lister les opportunit√©s/√©valuer/prioriser) / objet (usecase etc) / agentic (prompts aujourd'hui) templates (Design session)
  Dans l'esprit, l'ensemble des activit√©s top ai ideas serait un workflow bas√© sur des objets (use case, folder, organisation, synth√®se exec) associ√© √† de l'agentique (agent d'id√©ation pour cr√©er un ensemble d'opportunit√©s, agent d'approfondissement d'id√©e/usecase et √©valuation, objet d'√©valuation d'un autre objet (matrice), objet de priorisation (synth√®se exec)).
  Les objets d'√©valuation sont un peu sp√©cifiques, et il y a aussi des objets de restitution qui manquent. On pourrait les appeler des outils, mais ce ne sont pas des outils pour l'IA, donc il faut d√©terminer un concept. Il pourrait dans la m√™me game y avoir les √©valuation de plan (d√©f de workpackages / jalons / charge x profils ).
  Il y a aussi les objets de restitution sp√©cifique, comme le dashboard valeur/complexit√©: roadmap (timeline), diagramme d'organisation d'√©quipe, diagrammes d'architecture / de process / de business vision (sens archimate)
  La session vise √† mod√©liser au mieux et de facon la plus g√©n√©rique la notion de template (=workflow+objets+agentc) avec les abstractions n√©cessaires et la r√©utilisation suffisante pour permettre de couvrir les processus suivants:
    - [ ] Gestion d'opportunit√© multi-client pour une soci√©t√© de conseil
    - [ ] Gestion de proposition pour une soci√©t√© de conseil (incluant la sc√©narisation de dispositifs / plan charges / profil / exclusion / assumptions / prix / offre finale / pr√©sentation d'offre)
    - [ ] Gestion de r√©f√©rentiel de processus et de processus eux m√™me (√† approfondir)
    - [ ] Gestion de roadmap d'architecture d'entreprise (applications / infrastructures / plan d'√©volution / sc√©narios / crit√®res de priorisation / vision planifi√©e / gestion des risques)
    - [ ] High level design dossier (movitation for change / diagramme system as-is / composants du system as-is / √©valuation SWOT de ces composants / vision business au sens archimate / architecture drivers (constraints, standard, principles) / buisness requirements / non-functional requirements / business objects / high level design scenario = descriptions & schema avec composants / scenario evaluation selon crit√®res / vue de transition / pr√©sentation de l'initiative=scenario privil√©gi√© (description intiative, Digital scope for initiative, initial goals, prerequisites, buisness outcomes, estimation budget, initiative timelines/milestones, risks, archi dimension) )
    - [ ] Business case management / Porfolio
    - [ ] Gestion de Profils / Comp√©tences / CV / Porfolio d'exp√©riences
    - [ ] D√©finition d'un business plan (√† approfondir)
    - [ ] Evaluation d'intelligence √©conomique (des docs seront fournis)
    - [ ] Veille strat√©gique (√† approfondir)
    - [ ] autres id√©es (√† approfondir)
    Les travaux devront aussi d√©finir les int√©gration potentielles (Collab Gdrive, ERP, Workday, Signature √©lectronique ...) et les features cl√©s (e.g r√©vision / validation avec role d'objet = workflow de validation formel). Envisager cela √† haut niveau permettra
    En sortie on attendra:
    - [ ] Une sp√©cification d√©taill√©e du mod√®le coeur
    - [ ] Une sp√©cification des composant cibles, api et ui
    - [ ] Une proposition d'√©volution (drastique potentiellement) du data model
    - [ ] Une liste d'int√©gration must-have et should have par business case
    - [ ] Un plan de transition pour l'application as-is avec les lots, sous-lots et √©taps (soit en une branche, soit multibranche sachant qu'√† chaque fin de branche il y a une mise en prod)
    - [ ] Evaluation des charges des lots
    - [ ] Evaluation d'opportunit√© de chaque feature vs potentiels clients du produit
  - [ ] ajouter le rendu de r√©sultat des tools et l'historiser
  - [ ] g√©rer le streaming json (sortie de r√©ponse, entree et sortie de tool m√™me si ce dernier est en bloc) avec la complexit√© cf spec/MARKDOWN_STREAMING.md
- [ ] **Chatbot Lot C ‚Äî Tool-calls parall√®les et appels structur√©s** (cf. spec/SPEC_CHATBOT.md - source de v√©rit√©)
  - [ ] Table `structured_generation_runs` pour tra√ßabilit√© compl√®te
  - [ ] Tables `prompts`/`prompt_versions` pour versioning des prompts
  - [ ] Endpoint POST `/api/structured/:prompt_id` pour appels structur√©s d√©di√©s
  - [ ] Annulation via queue (PATCH `/api/structured/:run_id/cancel`)
  - [ ] Multi-contexte dans une session (plusieurs objets)
  - [ ] Tests : Unit/int/E2E pour appels structur√©s parall√®les, annulation
  - **Couverture CU** : CU-008 (finalisation), CU-011 (annulation), CU-012 (multi-contexte), CU-019 (annulation queue)
- [ ] **Chatbot Lot D ‚Äî Audit, diff et r√©silience** (cf. spec/SPEC_CHATBOT.md - source de v√©rit√©)
  - [ ] Composant `DiffViewer` pour afficher les diff√©rences avant/apr√®s
  - [ ] Rollback via snapshots (API + UI)
  - [ ] Onglet "Historique" dans les vues objets (folder, use case, company + comments)
  - [ ] Liste des sessions ayant modifi√© l'objet
  - [ ] Preview des modifications avant application (diff visuel)
  - [ ] Confirmation explicite avant d'appliquer une modification (bouton "Appliquer")
  - [ ] Gestion du contexte long (limite tokens, r√©sum√© automatique)
  - [ ] Tests : Unit/int/E2E pour diff/rollback, reprise SSE
  - **Couverture CU** : CU-011 (rollback), CU-016 (onglet Historique), CU-017 (contexte long), CU-018 (validation/confirmation)
- [ ] **Chatbot Lot E ‚Äî Robustesse + fonctionnalit√©s avanc√©es** (cf. spec/SPEC_CHATBOT.md - source de v√©rit√©)
  - [ ] Switch de mod√®le dans les sessions (UI + API)
  - [ ] Approfondissement avec mod√®le sup√©rieur
  - [ ] Cr√©ation d'objets via chat (tools)
  - [ ] Export et partage (JSON, Markdown, PDF)
  - [ ] Retry automatique avec correction pour erreurs r√©cup√©rables
  - [ ] Suggestions et recommandations (IA proactive)
  - [ ] Extension voix : stub `audio_chunk` (type d'√©v√©nement) c√¥t√© SSE
  - [ ] Tests : Unit/int/E2E couvrant un flux complet (chat + structured + tool-calls + rollback)
  - **Couverture CU** : CU-006 (switch mod√®le), CU-007 (approfondissement), CU-009 (cr√©ation objets), CU-013 (suggestions), CU-014 (export/partage), CU-017 (contexte long), CU-020 (feedback), CU-021 (gestion erreurs am√©lior√©e)
- [ ] Fonctions de d√©sactivation de dossier / cas d'usage / entreprise, de partage entre utilisateurs, de publication (publique)
- [ ] Gestion des profils freemium / payant: gestion du nombre d'enrichissements / utilisateur / type de mod√®le
- [ ] Mise en place poker planning
- [ ] Ajouter un tool de recherche de brevets (Lens API)
- [ ] Implement security tests and add it in CI
- [ ] Backups automatis√©s PostgreSQL (externalisation sur S3)
- [ ] Mise en place de paiements
- [ ] R√©-activer et corriger les 2 tests E2E entreprises (cr√©ation + bouton IA)
  - Raison du skip: `EditableInput` avec auto-save (5s) et enrichissement IA parfois >30s
  - Action: adapter le test pour attendre la fin d'auto-save et stabiliser l'enrichissement


## √âl√©ments identifi√©s pour impl√©mentation future (lors du linting)

- [ ] **Impl√©menter le syst√®me de refresh tokens**
  - Activer `REFRESH_DURATION` (30 jours) et `refreshExpiresAt` dans `session-manager.ts`
  - Ajouter endpoint pour rafra√Æchir les tokens
  - G√©rer la rotation des refresh tokens

- [ ] **Utiliser `credentialBackedUp` pour la gestion des devices**
  - Activer la v√©rification si un device est sauvegard√© (backup)
  - Utiliser pour am√©liorer la gestion des credentials WebAuthn
  - Fichier: `api/src/services/webauthn-registration.ts`

- [ ] **R√©activer l'enrichissement asynchrone des entreprises**
  - Activer la fonction `enrichCompanyAsync` dans `api/src/routes/api/companies.ts`
  - Utiliser la queue pour les enrichissements longs
  - Actuellement comment√©e car non utilis√©e

- [ ] **R√©activer le prompt de nom de dossier**
  - Activer `folderNamePrompt` dans `api/src/routes/api/use-cases.ts`
  - Utiliser pour g√©n√©rer automatiquement les noms de dossiers
  - Actuellement comment√© car non utilis√©

- [ ] **R√©activer la fonction `parseExecutiveSummary`**
  - Activer dans `api/src/routes/api/folders.ts` si n√©cessaire
  - Utiliser pour parser les synth√®ses ex√©cutives stock√©es
  - Actuellement comment√©e car non utilis√©e

- [ ] **Impl√©menter l'annulation r√©elle des jobs dans la queue**
  - Actuellement juste un TODO dans `api/src/routes/api/queue.ts`
  - N√©cessite d'interrompre r√©ellement un job en cours d'ex√©cution
  - Utiliser les AbortController d√©j√† pr√©sents dans QueueManager

- [ ] **Normaliser l'incoh√©rence titre/name/nom pour les UseCase**
  - **Probl√®me identifi√©** : Incoh√©rence dans le flux de donn√©es entre prompt/API/DB/UI
    - Prompt g√©n√®re `"titre"` (fran√ßais) dans `default-prompts.ts:69`
    - Interface API utilise `titre: string` dans `context-usecase.ts:6`
    - Conversion `titre` ‚Üí `name` dans `queue-manager.ts:328-330`
    - Stockage final utilise `name` (anglais) dans `UseCaseData`
    - Code UI cherche encore `titre` ou `nom` dans `dashboard/+page.svelte:937`
  - **Actions √† faire** :
    1. V√©rifier si le prompt doit g√©n√©rer `"name"` au lieu de `"titre"` pour coh√©rence
    2. V√©rifier le sch√©ma Zod c√¥t√© API pour validation
    3. Normaliser sur `name` partout OU documenter la r√©trocompatibilit√©
    4. Supprimer les fallbacks `(useCase as any)?.titre || (useCase as any)?.nom` si plus n√©cessaires
    5. Mettre √† jour l'interface `UseCaseListItem` si n√©cessaire
